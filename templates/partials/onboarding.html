<!-- ============================================================================ -->
<!-- ONBOARDING.HTML - Fixed with consistent data-action attributes              -->
<!-- No more onclick handlers - everything uses data-action                      -->
<!-- ============================================================================ -->

<!-- Age Gate Modal -->
<div id="ageGateModal" class="modal-overlay age-gate-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container age-gate-container">
        
        <div class="age-gate-header">
            <span class="age-gate-emoji">ğŸº</span>
            <h1 class="age-gate-title">Coeliacs Like Beer Too!</h1>
        </div>
        
        <div class="age-gate-body">           
            <div class="age-gate-message">
                <h2>Hold up there, beer lover!</h2>
                <p>This site contains content about alcoholic beverages.</p>
                <p class="age-question">Are you 18 or over?</p>
            </div>
            
            <div class="age-gate-buttons">
                <button class="btn btn-primary btn-large" data-action="confirm-age">
                    âœ… Yes, I'm 18 or over
                </button>
                <button class="btn btn-secondary" data-action="under-age">
                    âŒ Not yet
                </button>
            </div>
            
            <div class="age-gate-legal">
                <p>By entering this site you agree to our 
                   <a href="/terms" target="_blank">Terms</a> and 
                   <a href="/privacy" target="_blank">Privacy Policy</a>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- PWA Install Prompt Modal -->
<div id="pwa-benefits-modal" class="modal-overlay pwa-benefits-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <span class="modal-icon">âœ¨</span>
            <h2 class="modal-title">Get the Best Experience!</h2>
            <p class="modal-subtitle">Install our app for better features</p>
        </div>
        
        <div class="modal-body">
            <div class="pwa-intro">
                <p>Take 10 seconds to install our app for a smoother experience</p>
            </div>
            
            <div class="pwa-benefits-grid">
                <div class="pwa-benefit">
                    <span class="benefit-icon">ğŸ“</span>
                    <div class="benefit-text">
                        <strong>Better Location Access</strong>
                        <small>Fewer permission prompts</small>
                    </div>
                </div>
                <div class="pwa-benefit">
                    <span class="benefit-icon">âš¡</span>
                    <div class="benefit-text">
                        <strong>Faster Loading</strong>
                        <small>Works offline too</small>
                    </div>
                </div>
                <div class="pwa-benefit">
                    <span class="benefit-icon">ğŸ </span>
                    <div class="benefit-text">
                        <strong>Home Screen Icon</strong>
                        <small>One-tap access</small>
                    </div>
                </div>
                <div class="pwa-benefit">
                    <span class="benefit-icon">ğŸ“²</span>
                    <div class="benefit-text">
                        <strong>App Experience</strong>
                        <small>No browser bars</small>
                    </div>
                </div>
            </div>
            
            <p class="pwa-note">
                <strong>Same account everywhere!</strong> Sign up once, use anywhere.
            </p>
        </div>
        
        <div class="modal-actions">
            <button class="btn btn-secondary" data-action="skip-pwa-benefits">Skip for Now</button>
            <button class="btn btn-primary" data-action="show-install-guide">Show Me How!</button>
        </div>
    </div>
</div>

<!-- iOS Install Guide Modal -->
<div id="ios-install-guide" class="modal-overlay" style="display: none;" data-cover-nav="true">
    <div class="modal-content">
        <button class="modal-close" data-action="close-ios-guide">Ã—</button>
        
        <div class="modal-header">
            <div class="ios-guide-icon">ğŸ“±</div>
            <h2>Install Coeliacs Like Beer ğŸº</h2>
            <p>Get app-like experience & better location access</p>
        </div>
        
        <div class="ios-guide-steps">
            <div class="ios-step">
                <span class="step-number">1</span>
                <div class="step-content">
                    <div class="share-icon-visual">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                            <polyline points="16 6 12 2 8 6"/>
                            <line x1="12" y1="2" x2="12" y2="15"/>
                        </svg>
                    </div>
                    <span class="step-text">Tap the Share button below</span>
                </div>
            </div>
            
            <div class="ios-step">
                <span class="step-number">2</span>
                <div class="step-content">
                    <span class="step-text">Select "Add to Home Screen"</span>
                </div>
            </div>
            
            <div class="ios-step">
                <span class="step-number">3</span>
                <div class="step-content">
                    <span class="step-text">Enjoy app-like experience!</span>
                </div>
            </div>
        </div>      
        
        <div class="ios-guide-benefits">
            <div class="ios-benefit">âš¡ Faster loading</div>
            <div class="ios-benefit">ğŸ“ Better location access</div>
            <div class="ios-benefit">ğŸ”„ Works offline</div>
        </div>

        <div class="ios-guide-arrow">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                <path d="M20 5 L20 30 M10 20 L20 30 L30 20" stroke="#667eea" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="arrow-text">Down here!</span>
        </div>
        
    </div>
</div>

<!-- Android/Desktop Install Prompt Modal -->
<div id="android-install-guide" class="modal-overlay" style="display: none;" data-cover-nav="true">
    <div class="modal-content">
        <button class="modal-close" data-action="close-android-guide">Ã—</button>
        
        <div class="modal-header">
            <div class="ios-guide-icon">ğŸ“±</div>
            <h2>Install Coeliacs Like Beer ğŸº</h2>
            <p>Get the app experience with one click!</p>
        </div>
        
        <div class="android-guide-content">
            <p class="install-ready-text">
                Your browser is ready to install this app!
            </p>
            
            <button class="btn btn-primary btn-large" id="android-install-now">
                <span>ğŸ“²</span> Install Now
            </button>
            
            <div class="android-benefits">
                <div class="benefit-row">
                    <span>âš¡</span> Instant access from home screen
                </div>
                <div class="benefit-row">
                    <span>ğŸ“</span> Better location permissions
                </div>
                <div class="benefit-row">
                    <span>ğŸ”„</span> Works offline
                </div>
                <div class="benefit-row">
                    <span>ğŸ“±</span> No browser bars
                </div>
            </div>
            
            <p class="install-note">
                You can always uninstall from your phone settings
            </p>
        </div>
    </div>
</div>

<!-- Welcome Modal -->
<div id="welcomeModal" class="modal-overlay welcome-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container welcome-container">
        
        <button class="modal-skip-btn" data-action="skip-welcome">Skip â†’</button>
        
        <div class="welcome-header">
            <span class="welcome-emoji">ğŸ‰</span>
            <h1>Welcome to the UK's Biggest<br>GF Beer Community!</h1>
        </div>
        
        <div class="welcome-body">
            <div class="founder-section">
                <div class="founder-message">
                    <p class="founder-greeting">Hey there! Ben here - fellow coeliac and beer enthusiast.</p>
                    <p>You know that feeling when the bartender suggests Corona as a "gluten-free option"? Yeah, me too ğŸ˜©</p>
                    <p>That's why I created this. With YOUR help, we're mapping every venue serving GF beer in the UK! ğŸ—ºï¸ğŸº</p>
                </div>
            </div>
            
            <div class="stats-showcase">
                <div class="stat-item">
                    <span class="stat-number">67,000+</span>
                    <span class="stat-label">Venues</span>
                </div>
                <div class="stat-item stat-featured">
                    <span class="stat-number">50+</span>
                    <span class="stat-label">With GF Beer</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">Growing</span>
                    <span class="stat-label">Community</span>
                </div>
            </div>
            
            <div class="features-grid">
                <div class="feature-item">
                    <span class="feature-icon">ğŸ“</span>
                    <span class="feature-text">Find GF beer near you</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">ğŸº</span>
                    <span class="feature-text">Report your finds</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">ğŸ†</span>
                    <span class="feature-text">Earn points & badges</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">ğŸ’ª</span>
                    <span class="feature-text">Help the community</span>
                </div>
            </div>
            
            <button class="btn btn-primary btn-hero" data-action="show-nickname-selection">
                Join the Community! â†’
            </button>
        </div>
    </div>
</div>

<!-- Nickname Selection Modal -->
<div id="nicknameModal" class="modal-overlay nickname-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container nickname-container">
        
        <button class="modal-skip-btn" data-action="skip-nickname">Skip â†’</button>
        
        <div class="nickname-header">
            <span class="nickname-emoji">ğŸ»</span>
            <h2>Choose Your Nickname!</h2>
            <p>This is how you'll be known in the community</p>
        </div>
        
        <div class="nickname-body">
            <div class="nickname-form">
                <div class="input-group">
                    <input type="text" 
                           id="nicknameInput" 
                           class="nickname-input"
                           placeholder="e.g. HopHunter, GFBeerGuru, MaltMaster..."
                           maxlength="30"
                           data-action="check-nickname-input">
                    <div class="input-status" id="nicknameStatus"></div>
                    <div id="nicknameOptions" class="nickname-options-box" style="display: none;"></div>
                </div>
                
                <div class="suggestions-section">
                    <p>Need inspiration? Try these:</p>
                    <div class="suggestion-chips">
                        <button class="chip" data-action="generate-random-nickname">
                            ğŸ² Random
                        </button>
                        <button class="chip" data-action="use-nickname" data-nickname="BeerExplorer">
                            BeerExplorer
                        </button>
                        <button class="chip" data-action="use-nickname" data-nickname="HopHunter">
                            HopHunter
                        </button>
                        <button class="chip" data-action="use-nickname" data-nickname="GFGuru">
                            GFGuru
                        </button>
                    </div>
                </div>
                
                <div class="avatar-section">
                    <p>Choose your avatar:</p>
                    <div class="avatar-grid" id="avatarGrid">
                        <button class="avatar-option active" data-action="select-avatar" data-emoji="ğŸº">ğŸº</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ»">ğŸ»</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="â­">â­</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ¯">ğŸ¯</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸš€">ğŸš€</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ’ª">ğŸ’ª</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ†">ğŸ†</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ¦„">ğŸ¦„</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ¨">ğŸ¨</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸŒŸ">ğŸŒŸ</button>
                    </div>
                </div>
                
                <div class="privacy-section">
                    <div class="privacy-item">âœ… No email required</div>
                    <div class="privacy-item">âœ… No personal data</div>
                    <div class="privacy-item">âœ… Secure passcode access</div>
                    <div class="privacy-item">âœ… Sync across devices!</div>
                </div>
            </div>
            
            <div class="nickname-actions">
                <button class="btn btn-primary" id="saveNicknameBtn" data-action="save-nickname" disabled>
                    Create Account!
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Sign In Modal -->
<div id="signInModal" class="modal-overlay signin-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container signin-container">
        
        <button class="modal-close-btn" data-action="close-signin">Ã—</button>
        
        <div class="signin-header">
            <span class="signin-emoji">ğŸ”‘</span>
            <h2>Welcome back, <span id="signInNicknameDisplay">friend</span>!</h2>
            <p>Great to see you again! Let's get you signed in.</p>
        </div>
        
        <div class="signin-body">
            <div class="signin-form">
                <div class="input-group">
                    <label for="signInNickname">
                        <span class="label-icon">ğŸ‘¤</span> Nickname
                    </label>
                    <input type="text" 
                           id="signInNickname" 
                           class="signin-input"
                           placeholder="Your nickname"
                           required>
                    <small class="input-hint">The nickname you chose when creating your account</small>
                </div>
                
                <div class="input-group">
                    <label for="signInPasscode">
                        <span class="label-icon">ğŸ”</span> Passcode
                    </label>
                    <div class="passcode-input-wrapper">
                        <input type="text" 
                               id="signInPasscode" 
                               class="signin-input passcode-input"
                               placeholder="â— â— â— â— â— â—"
                               maxlength="6"
                               autocomplete="off"
                               autocorrect="off"
                               autocapitalize="characters"
                               spellcheck="false"
                               required>
                        <div class="passcode-format-hint">6 CHARACTERS</div>
                    </div>
                    <small class="input-hint">The passcode you saved when creating your account</small>
                </div>
                
                <div id="signInError" class="signin-error-box" style="display: none;">
                    <span class="error-icon">âš ï¸</span>
                    <span class="error-text"></span>
                </div>
            </div>
            
            <div class="signin-actions">
                <button type="button" class="btn btn-secondary btn-large" data-action="back-to-nickname">
                    <span class="btn-icon">â†</span> Try Another Name
                </button>
                <button type="button" class="btn btn-primary btn-large btn-glow" data-action="perform-signin">
                    <span class="btn-icon">ğŸ”“</span> Sign In
                </button>
            </div>
            
            <div class="signin-help">
                <div class="help-icon">ğŸ’¡</div>
                <div class="help-content">
                    <p><strong>Lost your passcode?</strong></p>
                    <small>Unfortunately, we can't recover passcodes for security reasons. You'll need to create a new account with a different nickname.</small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Passcode Display Modal -->
<div id="passcodeModal" class="modal-overlay passcode-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container passcode-container">
        
        <div class="passcode-header">
            <span class="success-icon">âœ…</span>
            <h2>Account Created!</h2>
            <p>Save this passcode to access your account</p>
        </div>
        
        <div class="passcode-body">
            <div class="passcode-section">
                <h3>Your Secure Passcode</h3>
                <div class="passcode-display">
                    <span id="passcodeValue">000000</span>
                    <button class="btn btn-sm" data-action="copy-passcode">
                        ğŸ“‹ Copy
                    </button>
                </div>
                
                <div class="passcode-warning">
                    <p>âš ï¸ <strong>Important:</strong></p>
                    <p>â€¢ This is the ONLY time you'll see this passcode</p>
                    <p>â€¢ Save it somewhere safe (notes app, password manager)</p>
                    <p>â€¢ You'll need it to sign in on other devices</p>
                </div>
                
                <div class="passcode-actions">
                    <button class="btn btn-secondary" data-action="download-passcode">
                        ğŸ’¾ Save as Text File
                    </button>
                    <button class="btn btn-secondary" data-action="email-passcode">
                        ğŸ“§ Email to Myself
                    </button>
                </div>
            </div>
            
            <div class="passcode-confirm">
                <label class="checkbox-label">
                    <input type="checkbox" id="passcodeConfirmCheck" data-action="toggle-passcode-confirm">
                    <span>I've saved my passcode somewhere safe</span>
                </label>
            </div>
            
            <button class="btn btn-primary btn-large" 
                    id="continueFromPasscode" 
                    data-action="continue-from-passcode" 
                    disabled>
                Continue to App â†’
            </button>
        </div>
    </div>
</div>

<!-- Community Benefits Modal -->
<div id="benefitsModal" class="modal-overlay benefits-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container benefits-container">
        
        <div class="benefits-header">
            <div class="avatar-display" id="userAvatarDisplay">ğŸº</div>
            <h2>Welcome, <span id="userNicknameDisplay">BeerLover</span>!</h2>
            <p>You're now part of something special</p>
        </div>
        
        <div class="benefits-body">
            <div class="welcome-bonus">
                <span class="bonus-icon">ğŸ</span>
                <div class="bonus-text">
                    <strong>Welcome Bonus!</strong>
                    <span>You've earned 10 points for joining</span>
                </div>
            </div>
            
            <div class="benefits-grid">
                <div class="benefit">
                    <span class="benefit-icon">ğŸ“</span>
                    <strong>Find GF Beer</strong>
                    <small>Discover venues near you</small>
                </div>
                <div class="benefit">
                    <span class="benefit-icon">ğŸº</span>
                    <strong>Report Finds</strong>
                    <small>15 points per beer</small>
                </div>
                <div class="benefit">
                    <span class="benefit-icon">ğŸ†</span>
                    <strong>Earn Badges</strong>
                    <small>Unlock achievements</small>
                </div>
                <div class="benefit">
                    <span class="benefit-icon">ğŸ“Š</span>
                    <strong>Track Progress</strong>
                    <small>See your impact</small>
                </div>
            </div>
            
            <div class="first-badge">
                <p>You've earned your first badge!</p>
                <div class="badge-showcase">
                    <span style="font-size: 3rem;">ğŸŒŸ</span>
                    <div class="badge-info">
                        <strong>Welcome Explorer</strong>
                        <small>Joined the community</small>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-primary btn-large" data-action="start-exploring">
                Start Exploring! ğŸ—ºï¸
            </button>
        </div>
    </div>
</div>
