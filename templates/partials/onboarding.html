<!-- Age Gate Modal -->
<div id="ageGateModal" class="modal-overlay age-gate-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container age-gate-container">
        
        <div class="age-gate-header">
            <span class="age-gate-emoji">ğŸº</span>
            <h1 class="age-gate-title">Coeliacs Like Beer Too!</h1>
        </div>
        
        <div class="age-gate-body">           
            <div class="age-gate-message">
                <h2>Hold up there, beer lover!</h2>
                <p>This site contains content about alcoholic beverages.</p>
                <p class="age-question">Are you 18 or over?</p>
            </div>
            
            <div class="age-gate-buttons">
                <button class="btn btn-primary btn-large" data-action="confirm-age">
                    âœ… Yes, I'm 18 or over
                </button>
                <button class="btn btn-secondary" data-action="under-age">
                    âŒ Not yet
                </button>
            </div>
            
            <div class="age-gate-legal">
                <p>By entering this site you agree to our 
                   <a href="#" data-action="show-terms-from-age-gate">Terms</a> and 
                   <a href="#" data-action="show-privacy-from-age-gate">Privacy Policy</a>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Privacy Policy Modal -->
<div id="privacyModal" class="modal-overlay legal-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container legal-container">
        
        <button class="modal-close-btn" data-action="close-privacy-modal">Ã—</button>
        
        <div class="legal-header">
            <span class="legal-emoji">ğŸ”’</span>
            <h2>Your Privacy Matters</h2>
            <p>We keep things simple and transparent</p>
        </div>
        
        <div class="legal-body">
            <!-- Quick Summary -->
            <div class="legal-highlight-box">
                <h3>âœ¨ The 30-Second Version</h3>
                <div class="quick-points">
                    <div class="quick-point">
                        <span class="point-icon">âœ…</span>
                        <span>No email required - ever</span>
                    </div>
                    <div class="quick-point">
                        <span class="point-icon">âœ…</span>
                        <span>Location data stays on your device</span>
                    </div>
                    <div class="quick-point">
                        <span class="point-icon">âœ…</span>
                        <span>We never sell your data</span>
                    </div>
                    <div class="quick-point">
                        <span class="point-icon">âœ…</span>
                        <span>Delete your account anytime</span>
                    </div>
                </div>
            </div>
            
            <!-- Main Sections -->
            <div class="legal-section-card">
                <div class="section-icon">ğŸ“Š</div>
                <div class="section-content">
                    <h4>What We Collect</h4>
                    <p>Just the basics to make the app work:</p>
                    <ul class="clean-list">
                        <li>Your nickname (not your real name)</li>
                        <li>Beer reports you share</li>
                        <li>General location (only when searching)</li>
                    </ul>
                </div>
            </div>
            
            <div class="legal-section-card">
                <div class="section-icon">ğŸš«</div>
                <div class="section-content">
                    <h4>What We DON'T Collect</h4>
                    <p>We respect your privacy:</p>
                    <ul class="clean-list">
                        <li>No email addresses</li>
                        <li>No phone numbers</li>
                        <li>No payment info</li>
                        <li>No personal details</li>
                    </ul>
                </div>
            </div>
            
            <div class="legal-section-card">
                <div class="section-icon">ğŸ›¡ï¸</div>
                <div class="section-content">
                    <h4>Your Rights</h4>
                    <p>You're in control:</p>
                    <ul class="clean-list">
                        <li>Request your data anytime</li>
                        <li>Delete everything instantly</li>
                        <li>Correct any mistakes</li>
                        <li>Opt out of analytics</li>
                    </ul>
                </div>
            </div>
            
            <div class="legal-section-card">
                <div class="section-icon">ğŸª</div>
                <div class="section-content">
                    <h4>Cookies</h4>
                    <p>Only the essentials + optional analytics:</p>
                    <ul class="clean-list">
                        <li>Remember your preferences</li>
                        <li>Keep you logged in</li>
                        <li>Analytics (if you consent)</li>
                    </ul>
                </div>
            </div>
            
            <!-- Full Policy Link -->
            <div class="legal-full-link">
                <p>Need more details? Read the full legal version:</p>
                <a href="/privacy" target="_blank" class="btn btn-secondary">
                    ğŸ“„ Full Privacy Policy
                </a>
            </div>
            
            <!-- Contact -->
            <div class="legal-contact">
                <p>Questions? Email us at <a href="mailto:info@coeliacslikebeer.co.uk">info@coeliacslikebeer.co.uk</a></p>
            </div>
        </div>
    </div>
</div>

<!-- Terms of Service Modal -->
<div id="termsModal" class="modal-overlay legal-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container legal-container">
        
        <button class="modal-close-btn" data-action="close-terms-modal">Ã—</button>
        
        <div class="legal-header terms-header">
            <span class="legal-emoji">ğŸ“œ</span>
            <h2>Terms of Service</h2>
            <p>The simple rules for using our app</p>
        </div>
        
        <div class="legal-body">
            <!-- Quick Summary -->
            <div class="legal-highlight-box">
                <h3>ğŸ¯ The Quick Version</h3>
                <div class="quick-points">
<!--                     <div class="quick-point">
                        <span class="point-icon">âœ…</span>
                        <span>Free forever - no hidden costs</span>
                    </div> -->
                    <div class="quick-point">
                        <span class="point-icon">âœ…</span>
                        <span>You must be 18 or over</span>
                    </div>
                    <div class="quick-point">
                        <span class="point-icon">âœ…</span>
                        <span>Share accurate information</span>
                    </div>
                    <div class="quick-point">
                        <span class="point-icon">âœ…</span>
                        <span>Be nice to everyone</span>
                    </div>
                </div>
            </div>
            
            <!-- Main Sections -->
            <div class="legal-section-card">
                <div class="section-icon">ğŸº</div>
                <div class="section-content">
                    <h4>Using the App</h4>
                    <p>Super simple rules:</p>
                    <ul class="clean-list">
                        <li>Be 18+ (it's about beer!)</li>
                        <li>Report real beer finds</li>
                        <li>Don't spam or troll</li>
                        <li>Respect the community</li>
                    </ul>
                </div>
            </div>
            
            <div class="legal-warning-card">
                <div class="warning-icon">âš ï¸</div>
                <div class="warning-content">
                    <h4>Medical Disclaimer</h4>
                    <p><strong>This is NOT medical advice!</strong></p>
                    <p>Always verify with venues about GF options. We're a community platform, not doctors.</p>
                </div>
            </div>
            
            <div class="legal-section-card">
                <div class="section-icon">ğŸ“</div>
                <div class="section-content">
                    <h4>Your Content</h4>
                    <p>When you share beer finds:</p>
                    <ul class="clean-list">
                        <li>It helps everyone in the community</li>
                        <li>We can display it in the app</li>
                        <li>You confirm it's accurate</li>
                        <li>You keep ownership</li>
                    </ul>
                </div>
            </div>
            
            <div class="legal-section-card">
                <div class="section-icon">ğŸš«</div>
                <div class="section-content">
                    <h4>Don't Be That Person</h4>
                    <p>Please don't:</p>
                    <ul class="clean-list">
                        <li>Submit fake venues</li>
                        <li>Harass other users</li>
                        <li>Try to break things</li>
                        <li>Use it for illegal stuff</li>
                    </ul>
                </div>
            </div>
            
            <!-- Full Terms Link -->
            <div class="legal-full-link">
                <p>Need the full legal version?</p>
                <a href="/terms" target="_blank" class="btn btn-secondary">
                    ğŸ“„ Full Terms of Service
                </a>
            </div>
            
            <!-- Contact -->
            <div class="legal-contact">
                <p>Questions? Email <a href="mailto:info@coeliacslikebeer.co.uk">info@coeliacslikebeer.co.uk</a></p>
            </div>
        </div>
    </div>
</div>

<!-- Liability Notice Modal -->
<div id="liabilityModal" class="modal-overlay legal-modal liability-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container legal-container">
        
        <button class="modal-close-btn" data-action="close-liability-modal">Ã—</button>
        
        <div class="legal-header liability-header">
            <span class="legal-emoji">ğŸš¨</span>
            <h2>Safety First!</h2>
            <p>Critical information about your health</p>
        </div>
        
        <div class="legal-body">
            <!-- Critical Warning -->
            <div class="critical-warning-box">
                <h3>âš ï¸ PLEASE READ CAREFULLY</h3>
                <p>Your safety is YOUR responsibility</p>
            </div>
            
            <!-- Not Medical Advice -->
            <div class="legal-danger-card">
                <div class="danger-header">
                    <span class="danger-icon">ğŸš«</span>
                    <h4>This is NOT Medical Advice</h4>
                </div>
                <div class="danger-points">
                    <p>âŒ We're NOT healthcare professionals</p>
                    <p>âŒ We DON'T verify venue claims</p>
                    <p>âŒ We CAN'T guarantee no cross-contamination</p>
                    <p>âŒ We're NOT liable for reactions</p>
                </div>
            </div>
            
            <!-- Your Responsibility -->
            <div class="legal-action-card">
                <div class="action-header">
                    <span class="action-icon">âœ…</span>
                    <h4>What YOU Must Do</h4>
                </div>
                <ul class="responsibility-list">
                    <li>ALWAYS verify with venues directly</li>
                    <li>Ask about preparation methods</li>
                    <li>Check for cross-contamination</li>
                    <li>Trust your instincts</li>
                    <li>Consult your doctor</li>
                </ul>
            </div>
            
            <!-- Emergency Info -->
            <div class="emergency-card">
                <h4>ğŸ†˜ Emergency?</h4>
                <div class="emergency-number">CALL 999</div>
                <p>For severe allergic reactions, get help immediately!</p>
            </div>
            
            <!-- Information Accuracy -->
            <div class="legal-info-card">
                <div class="info-icon">ğŸ“Š</div>
                <div class="info-content">
                    <h4>About Our Information</h4>
                    <ul class="warning-list">
                        <li>Community reports can be WRONG</li>
                        <li>Venues change offerings DAILY</li>
                        <li>Staff training VARIES</li>
                        <li>Cross-contamination HAPPENS</li>
                    </ul>
                </div>
            </div>
            
            <!-- Legal Limit -->
            <div class="legal-limit-box">
                <p><strong>Legal stuff:</strong> Our maximum liability is Â£100. We provide this service free, as-is.</p>
            </div>
            
            <!-- Full Notice Link -->
            <div class="legal-full-link">
                <p>Please read the complete safety information:</p>
                <a href="/liability" target="_blank" class="btn btn-danger">
                    âš ï¸ Full Liability Notice
                </a>
            </div>
            
            <!-- Acknowledgment -->
            <div class="legal-acknowledge">
                <p>By using this app, you understand and accept these risks.</p>
            </div>
        </div>
    </div>
</div>


<!-- PWA Install Prompt Modal -->
<div id="pwa-benefits-modal" class="modal-overlay pwa-benefits-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <span class="modal-icon">âœ¨</span>
            <h2 class="modal-title">Get the Best Experience!</h2>
            <p class="modal-subtitle">Install our app for better features</p>
        </div>
        
        <div class="modal-body">
            <div class="pwa-intro">
                <p>Take 10 seconds to install our app for a smoother experience</p>
            </div>
            
            <div class="pwa-benefits-grid">
                <div class="pwa-benefit">
                    <span class="benefit-icon">ğŸ“</span>
                    <div class="benefit-text">
                        <strong>Better Location Access</strong>
                        <small>Fewer permission prompts</small>
                    </div>
                </div>
                <div class="pwa-benefit">
                    <span class="benefit-icon">âš¡</span>
                    <div class="benefit-text">
                        <strong>Faster Loading</strong>
                        <small>Works offline too</small>
                    </div>
                </div>
                <div class="pwa-benefit">
                    <span class="benefit-icon">ğŸ </span>
                    <div class="benefit-text">
                        <strong>Home Screen Icon</strong>
                        <small>One-tap access</small>
                    </div>
                </div>
                <div class="pwa-benefit">
                    <span class="benefit-icon">ğŸ“²</span>
                    <div class="benefit-text">
                        <strong>App Experience</strong>
                        <small>No browser bars</small>
                    </div>
                </div>
            </div>
            
            <p class="pwa-note">
                <strong>Same account everywhere!</strong> Sign up once, use anywhere.
            </p>
        </div>
        
        <div class="modal-actions">
            <button class="btn btn-secondary" data-action="skip-pwa-benefits">Skip for Now</button>
            <button class="btn btn-primary" data-action="show-install-guide">Show Me How!</button>
        </div>
    </div>
</div>

<!-- iOS Install Guide Modal -->
<div id="ios-install-guide" class="modal-overlay" style="display: none;" data-cover-nav="true">
    <div class="modal-content">
        <button class="modal-close" data-action="close-ios-guide">Ã—</button>
        
        <div class="modal-header">
            <div class="ios-guide-icon">ğŸ“±</div>
            <h2>Install Coeliacs Like Beer ğŸº</h2>
            <p>Get app-like experience & better location access</p>
        </div>
        
        <div class="ios-guide-steps">
            <div class="ios-step">
                <span class="step-number">1</span>
                <div class="step-content">
                    <div class="share-icon-visual">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                            <polyline points="16 6 12 2 8 6"/>
                            <line x1="12" y1="2" x2="12" y2="15"/>
                        </svg>
                    </div>
                    <span class="step-text">Tap the Share button below</span>
                </div>
            </div>
            
            <div class="ios-step">
                <span class="step-number">2</span>
                <div class="step-content">
                    <span class="step-text">Select "Add to Home Screen"</span>
                </div>
            </div>
            
            <div class="ios-step">
                <span class="step-number">3</span>
                <div class="step-content">
                    <span class="step-text">Enjoy app-like experience!</span>
                </div>
            </div>
        </div>      
        
        <div class="ios-guide-benefits">
            <div class="ios-benefit">âš¡ Faster loading</div>
            <div class="ios-benefit">ğŸ“ Better location access</div>
            <div class="ios-benefit">ğŸ”„ Works offline</div>
        </div>

        <div class="ios-guide-arrow">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                <path d="M20 5 L20 30 M10 20 L20 30 L30 20" stroke="#667eea" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="arrow-text">Down here!</span>
        </div>
        
    </div>
</div>

<!-- Android/Desktop Install Prompt Modal -->
<div id="android-install-guide" class="modal-overlay" style="display: none;" data-cover-nav="true">
    <div class="modal-content">
        <button class="modal-close" data-action="close-android-guide">Ã—</button>
        
        <div class="modal-header">
            <div class="ios-guide-icon">ğŸ“±</div>
            <h2>Install Coeliacs Like Beer ğŸº</h2>
            <p>Get the app experience with one click!</p>
        </div>
        
        <div class="android-guide-content">
            <p class="install-ready-text">
                Your browser is ready to install this app!
            </p>
            
            <button class="btn btn-primary btn-large" id="android-install-now" data-action = "android-install-now">
                <span>ğŸ“²</span> Install Now
            </button>
            
            <div class="android-benefits">
                <div class="benefit-row">
                    <span>âš¡</span> Instant access from home screen
                </div>
                <div class="benefit-row">
                    <span>ğŸ“</span> Better location permissions
                </div>
                <div class="benefit-row">
                    <span>ğŸ”„</span> Works offline
                </div>
                <div class="benefit-row">
                    <span>ğŸ“±</span> No browser bars
                </div>
            </div>
            
            <p class="install-note">
                You can always uninstall from your phone settings
            </p>
        </div>
    </div>
</div>

<!-- Post-Install Success Modal -->
<div class="modal-overlay" id="postInstallModal">
    <div class="modal-container post-install-container">
        <!-- Success Header -->
        <div class="post-install-header">
            <span class="success-checkmark">âœ…</span>
            <h2>App Installed Successfully!</h2>
            <p>Time to open your new app</p>
        </div>
        
        <!-- Body -->
        <div class="post-install-body">
            <!-- Simple Message -->
            <div class="install-message">
                <div class="app-icon-display">
                    <span>ğŸº</span>
                </div>
                
                <h3>Open Your New App!</h3>
                <p>Your Coeliacs Like Beer app is now on your home screen.</p>
                
                <div class="next-steps">
                    <div class="step">
                        <span class="step-emoji">ğŸ‘†</span>
                        <span>Go to your home screen</span>
                    </div>
                    <div class="step">
                        <span class="step-emoji">ğŸ”</span>
                        <span>Find the beer glass icon</span>
                    </div>
                    <div class="step">
                        <span class="step-emoji">ğŸ“±</span>
                        <span>Tap to open & create your account</span>
                    </div>
                </div>
                
                <div class="app-benefits-box">
                    <p><strong>Why use the app?</strong></p>
                    <p>âœ“ Works offline</p>
                    <p>âœ“ Faster loading</p>
                    <p>âœ“ Get notifications</p>
                    <p>âœ“ One-tap access</p>
                </div>
            </div>
            
            <!-- Actions -->
            <div class="post-install-actions">
                <button class="btn btn-primary" id="understoodBtn" data-action="post-install-go-to-app">
                    Got it! I'll open the app
                </button>
                <button class="btn btn-ghost" id="continueBrowserBtn" data-action="post-install-continue-browser">
                    Continue in browser instead
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Welcome Modal -->
<div id="welcomeModal" class="modal-overlay welcome-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container welcome-container">
        
        <button class="modal-skip-btn" data-action="skip-welcome">Skip â†’</button>
        
        <div class="welcome-header">
            <span class="welcome-emoji">ğŸ‰</span>
            <h1>Welcome to the UK's Biggest<br>GF Beer Community!</h1>
        </div>
        
        <div class="welcome-body">
            <div class="founder-section">
                <div class="founder-message">
                    <p class="founder-greeting">Hey there! Ben here - fellow coeliac and beer enthusiast.</p>
                    <p>You know that feeling when the bartender suggests Corona as a "gluten-free option"? Yeah, me too ğŸ˜©</p>
                    <p>That's why I created this. With YOUR help, we're mapping every venue serving GF beer in the UK! ğŸ—ºï¸ğŸº</p>
                </div>
            </div>
            
            <div class="stats-showcase">
                <div class="stat-item">
                    <span class="stat-number">67,000+</span>
                    <span class="stat-label">Venues</span>
                </div>
                <div class="stat-item stat-featured">
                    <span class="stat-number">50+</span>
                    <span class="stat-label">With GF Beer</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">Growing</span>
                    <span class="stat-label">Community</span>
                </div>
            </div>
            
            <div class="features-grid">
                <div class="feature-item">
                    <span class="feature-icon">ğŸ“</span>
                    <span class="feature-text">Find GF beer near you</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">ğŸº</span>
                    <span class="feature-text">Report your finds</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">ğŸ†</span>
                    <span class="feature-text">Earn points & badges</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">ğŸ’ª</span>
                    <span class="feature-text">Help the community</span>
                </div>
            </div>
            
            <button class="btn btn-primary btn-hero" data-action="show-nickname-selection">
                Join the Community! â†’
            </button>
        </div>
    </div>
</div>

<!-- Nickname Selection Modal -->
<div id="nicknameModal" class="modal-overlay nickname-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container nickname-container">
        
        <button class="modal-skip-btn" data-action="skip-nickname">Skip â†’</button>
        
        <div class="nickname-header">
            <span class="nickname-emoji">ğŸ»</span>
            <h2>Choose Your Nickname!</h2>
            <p>This is how you'll be known in the community</p>
        </div>
        
        <div class="nickname-body">
            <div class="nickname-form">
                <div class="input-group">
                    <input type="text" 
                           id="nicknameInput" 
                           class="nickname-input"
                           placeholder="e.g. HopHunter, GFBeerGuru, MaltMaster..."
                           maxlength="30"
                           data-action="check-nickname-input">
                    <div class="input-status" id="nicknameStatus"></div>
                    <div id="nicknameOptions" class="nickname-options-box" style="display: none;"></div>
                </div>
                
                <div class="suggestions-section">
                    <p>Need inspiration? Try these:</p>
                    <div class="suggestion-chips">
                        <button class="chip" data-action="generate-random-nickname">
                            ğŸ² Random
                        </button>
                        <button class="chip" data-action="use-nickname" data-nickname="BeerExplorer">
                            BeerExplorer
                        </button>
                        <button class="chip" data-action="use-nickname" data-nickname="HopHunter">
                            HopHunter
                        </button>
                        <button class="chip" data-action="use-nickname" data-nickname="GFGuru">
                            GFGuru
                        </button>
                    </div>
                </div>
                
                <div class="avatar-section">
                    <p>Choose your avatar:</p>
                    <div class="avatar-grid" id="avatarGrid">
                        <button class="avatar-option active" data-action="select-avatar" data-emoji="ğŸº">ğŸº</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ»">ğŸ»</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="â­">â­</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ¯">ğŸ¯</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸš€">ğŸš€</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ’ª">ğŸ’ª</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ†">ğŸ†</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ¦„">ğŸ¦„</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸ¨">ğŸ¨</button>
                        <button class="avatar-option" data-action="select-avatar" data-emoji="ğŸŒŸ">ğŸŒŸ</button>
                    </div>
                </div>
                
                <div class="privacy-section">
                    <div class="privacy-item">âœ… No email required</div>
                    <div class="privacy-item">âœ… No personal data</div>
                    <div class="privacy-item">âœ… Secure passcode access</div>
                    <div class="privacy-item">âœ… Sync across devices!</div>
                </div>
            </div>
            
            <div class="nickname-actions">
                <button class="btn btn-primary" id="saveNicknameBtn" data-action="save-nickname" disabled>
                    Create Account!
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Sign In Modal -->
<div id="signInModal" class="modal-overlay signin-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container signin-container">
        
        <button class="modal-close-btn" data-action="close-signin">Ã—</button>
        
        <div class="signin-header">
            <span class="signin-emoji">ğŸ”‘</span>
            <h2>Welcome back, <span id="signInNicknameDisplay">friend</span>!</h2>
            <p>Great to see you again! Let's get you signed in.</p>
        </div>
        
        <div class="signin-body">
            <div class="signin-form">
                <div class="input-group">
                    <label for="signInNickname">
                        <span class="label-icon">ğŸ‘¤</span> Nickname
                    </label>
                    <input type="text" 
                           id="signInNickname" 
                           class="signin-input"
                           placeholder="Your nickname"
                           required>
                    <small class="input-hint">The nickname you chose when creating your account</small>
                </div>
                
                <div class="input-group">
                    <label for="signInPasscode">
                        <span class="label-icon">ğŸ”</span> Passcode
                    </label>
                    <div class="passcode-input-wrapper">
                        <input type="text" 
                               id="signInPasscode" 
                               class="signin-input passcode-input"
                               placeholder="â— â— â— â— â— â—"
                               maxlength="6"
                               autocomplete="off"
                               autocorrect="off"
                               autocapitalize="characters"
                               spellcheck="false"
                               required>
                        <div class="passcode-format-hint">6 CHARACTERS</div>
                    </div>
                    <small class="input-hint">The passcode you saved when creating your account</small>
                </div>
                
                <div id="signInError" class="signin-error-box" style="display: none;">
                    <span class="error-icon">âš ï¸</span>
                    <span class="error-text"></span>
                </div>
            </div>
            
            <div class="signin-actions">
                <button type="button" class="btn btn-secondary btn-large" data-action="back-to-nickname">
                    <span class="btn-icon">â†</span> Try Another Name
                </button>
                <button type="button" class="btn btn-primary btn-large btn-glow" data-action="perform-signin">
                    <span class="btn-icon">ğŸ”“</span> Sign In
                </button>
            </div>
            
            <div class="signin-help">
                <div class="help-icon">ğŸ’¡</div>
                <div class="help-content">
                    <p><strong>Lost your passcode?</strong></p>
                    <small>Unfortunately, we can't recover passcodes for security reasons. You'll need to create a new account with a different nickname.</small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Passcode Display Modal -->
<div id="passcodeModal" class="modal-overlay passcode-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container passcode-container">
        
        <div class="passcode-header">
            <span class="success-icon">âœ…</span>
            <h2>Account Created!</h2>
            <p>Save this passcode to access your account</p>
        </div>
        
        <div class="passcode-body">
            <div class="passcode-section">
                <h3>Your Secure Passcode</h3>
                <div class="passcode-display">
                    <span id="passcodeValue">000000</span>
                    <button class="btn btn-sm" data-action="copy-passcode">
                        ğŸ“‹ Copy
                    </button>
                </div>
                
                <div class="passcode-warning">
                    <p>âš ï¸ <strong>Important:</strong></p>
                    <p>â€¢ This is the ONLY time you'll see this passcode</p>
                    <p>â€¢ Save it somewhere safe (notes app, password manager)</p>
                    <p>â€¢ You'll need it to sign in on other devices</p>
                </div>
                
                <div class="passcode-actions">
                    <button class="btn btn-secondary" data-action="download-passcode">
                        ğŸ’¾ Save as Text File
                    </button>
                    <button class="btn btn-secondary" data-action="email-passcode">
                        ğŸ“§ Email to Myself
                    </button>
                </div>
            </div>
            
            <div class="passcode-confirm">
                <label class="checkbox-label" for="passcodeConfirmCheck">
                    <input type="checkbox" 
                           id="passcodeConfirmCheck" 
                           onchange="
                               const btn = document.getElementById('continueFromPasscode');
                               if (btn) {
                                   btn.disabled = !this.checked;
                                   console.log('Checkbox changed:', this.checked, 'Button disabled:', btn.disabled);
                               }
                           ">
                    <span>I've saved my passcode somewhere safe</span>
                </label>
            </div>
            
            <button class="btn btn-primary btn-large" 
                    id="continueFromPasscode" 
                    data-action="continue-from-passcode" 
                    disabled>
                Continue to App â†’
            </button>
        </div>
    </div>
</div>

<!-- Community Benefits Modal -->
<div id="benefitsModal" class="modal-overlay benefits-modal" data-cover-nav="true" style="display: none;">
    <div class="modal-container benefits-container">
        
        <div class="benefits-header">
            <div class="avatar-display" id="userAvatarDisplay">ğŸº</div>
            <h2>Welcome, <span id="userNicknameDisplay">BeerLover</span>!</h2>
            <p>You're now part of something special</p>
        </div>
        
        <div class="benefits-body">
            <div class="welcome-bonus">
                <span class="bonus-icon">ğŸ</span>
                <div class="bonus-text">
                    <strong>Welcome Bonus!</strong>
                    <span>You've earned 10 points for joining</span>
                </div>
            </div>
            
            <div class="benefits-grid">
                <div class="benefit">
                    <span class="benefit-icon">ğŸ“</span>
                    <strong>Find GF Beer</strong>
                    <small>Discover venues near you</small>
                </div>
                <div class="benefit">
                    <span class="benefit-icon">ğŸº</span>
                    <strong>Report Finds</strong>
                    <small>15 points per beer</small>
                </div>
                <div class="benefit">
                    <span class="benefit-icon">ğŸ†</span>
                    <strong>Earn Badges</strong>
                    <small>Unlock achievements</small>
                </div>
                <div class="benefit">
                    <span class="benefit-icon">ğŸ“Š</span>
                    <strong>Track Progress</strong>
                    <small>See your impact</small>
                </div>
            </div>
            
            <div class="first-badge">
                <p>You've earned your first badge!</p>
                <div class="badge-showcase">
                    <span style="font-size: 3rem;">ğŸŒŸ</span>
                    <div class="badge-info">
                        <strong>Welcome Explorer</strong>
                        <small>Joined the community</small>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-primary btn-large" data-action="start-exploring">
                Start Exploring! ğŸ—ºï¸
            </button>
        </div>
    </div>
</div>

<div class="modal-overlay" data-cover-nav="true" id="cookieModal">
    <div class="modal-container cookie-container">
        <!-- Header -->
        <div class="cookie-header">
            <span class="cookie-emoji">ğŸª</span>
            <h2>Cookie Settings</h2>
            <p>We use cookies to improve your experience</p>
        </div>
        
        <!-- Body -->
        <div class="cookie-body">
            <!-- Main Message -->
            <div class="cookie-message">
                <p>We use cookies to remember your preferences, keep you logged in, and understand how you use Coeliacs Like Beer.</p>
            </div>
            
            <!-- Cookie Types -->
            <div class="cookie-types">
                <!-- Essential -->
                <div class="cookie-type">
                    <div class="cookie-type-header">
                        <div class="cookie-info">
                            <span class="cookie-icon">ğŸ”’</span>
                            <div>
                                <h4>Essential Cookies</h4>
                                <p>Required for the app to work properly</p>
                            </div>
                        </div>
                        <span class="cookie-badge always-on">Always On</span>
                    </div>
                    <div class="cookie-examples">
                        <small>Login status, age verification, app settings</small>
                    </div>
                </div>
                
                <!-- Analytics -->
                <div class="cookie-type">
                    <div class="cookie-type-header">
                        <div class="cookie-info">
                            <span class="cookie-icon">ğŸ“Š</span>
                            <div>
                                <h4>Analytics Cookies</h4>
                                <p>Help us improve the app</p>
                            </div>
                        </div>
                        <label class="cookie-toggle">
                            <input type="checkbox" id="analyticsCookies" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="cookie-examples">
                        <small>Page views, feature usage, error tracking</small>
                    </div>
                </div>
                
                <!-- Preferences -->
                <div class="cookie-type">
                    <div class="cookie-type-header">
                        <div class="cookie-info">
                            <span class="cookie-icon">âš™ï¸</span>
                            <div>
                                <h4>Preference Cookies</h4>
                                <p>Remember your choices</p>
                            </div>
                        </div>
                        <label class="cookie-toggle">
                            <input type="checkbox" id="preferenceCookies" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="cookie-examples">
                        <small>Search radius, map preferences, saved venues</small>
                    </div>
                </div>
            </div>
            
            <!-- Privacy Link -->
            <div class="cookie-privacy">
                <p>Learn more in our <a href="/privacy" target="_blank">Privacy Policy</a></p>
            </div>
            
            <!-- Actions -->
            <div class="cookie-actions">
                <button class="btn btn-primary" data-action="accept-all-cookies">
                    Accept All Cookies
                </button>
                <button class="btn btn-secondary" data-action="accept-selected-cookies">
                    Accept Selected
                </button>
                <button class="btn btn-ghost" data-action="essential-only-cookies">
                    Essential Only
                </button>
            </div>
        </div>
    </div>
</div>
