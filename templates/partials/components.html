<!-- Toasts -->
<div id="loadingToast" class="toast toast-loading">
    <div class="toast-content">
        <div class="spinner"></div>
        <span id="loadingMessage">Loading...</span>
    </div>
</div>

<div id="successToast" class="toast toast-success">
    <div class="toast-content">
        <span class="toast-icon">✅</span>
        <span id="successMessage">Success!</span>
    </div>
</div>

<!-- Location Permission Modal -->
<div id="locationPermissionModal" class="modal-overlay location-modal modal-fullscreen" data-cover-nav="true">
    <div class="modal-content">
        <div class="modal-header">
            <button class="modal-close" data-action="deny-location">×</button>
            <span class="modal-icon">📍</span>
            <h2 class="modal-title">Enable Location Services</h2>
            <p class="modal-subtitle">Find GF beer venues near you</p>
        </div>
        
        <div class="modal-body">
            <p class="permission-intro">
                To find GF beer venues near you, we need your location permission.
                <strong>Your location is never stored on our servers</strong> - it stays on your device.
            </p>
            
            <div class="ios-notice">
                <strong>📱 iPhone/iPad Users:</strong>
                <span>You'll need to allow location access each session for privacy. 
                For fewer prompts, add this app to your home screen.</span>
            </div>
            
            <div class="permission-benefits">
                <div class="benefit-item">
                    <span class="benefit-icon">🎯</span>
                    <span>Find the closest venues with GF beer instantly</span>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">📏</span>
                    <span>See accurate walking/driving distances</span>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">🗺️</span>
                    <span>Get turn-by-turn directions from where you are</span>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">🔒</span>
                    <span>Your privacy is protected - we never track or store your location</span>
                </div>
            </div>
            
            <p class="permission-note">
                Safari users: Go to Settings → Privacy → Location Services → Safari
                to manage permissions permanently
            </p>
        </div>
        
        <div class="modal-actions">
            <button class="btn btn-secondary" data-action="deny-location">Use Postcode Instead</button>
            <button class="btn btn-primary" data-action="allow-location">Enable Location</button>
        </div>
    </div>
</div>

<!-- Location Blocked Modal -->
<div id="locationBlockedModal" class="modal location-modal" data-cover-nav="true">
    <div class="modal-content location-permission-card">
        <div class="permission-icon blocked">🚫</div>
        <h2 class="permission-title">Location Access Blocked</h2>
        <p class="permission-text">
            Your browser is currently blocking location access for this website. 
            To find venues near you, you'll need to update your browser settings.
            If you don't wish to share your location, please select "Search
            by Area" below to continue.
        </p>
        
        <div class="permission-benefits blocked-instructions">
            <h4>How to enable location:</h4>
            
            <div class="browser-instructions" id="browserInstructions">
                <!-- Chrome -->
                <div class="instruction-set" data-browser="chrome">
                    <strong>Chrome:</strong>
                    <ol>
                        <li>Click the lock icon 🔒 in the address bar</li>
                        <li>Find "Location" and change it to "Allow"</li>
                        <li>Refresh the page and try again</li>
                    </ol>
                </div>
                
                <!-- Firefox -->
                <div class="instruction-set" data-browser="firefox">
                    <strong>Firefox:</strong>
                    <ol>
                        <li>Click the lock icon 🔒 in the address bar</li>
                        <li>Click "Clear permissions and reload"</li>
                        <li>When prompted, click "Allow location access"</li>
                    </ol>
                </div>
                
                <!-- Safari -->
                <div class="instruction-set" data-browser="safari">
                    <strong>Safari:</strong>
                    <ol>
                        <li>Go to Safari → Preferences → Websites</li>
                        <li>Click "Location" in the sidebar</li>
                        <li>Find coeliacslikebeer.co.uk and change to "Allow"</li>
                    </ol>
                </div>
                
                <!-- Edge -->
                <div class="instruction-set" data-browser="edge">
                    <strong>Edge:</strong>
                    <ol>
                        <li>Click the lock icon 🔒 in the address bar</li>
                        <li>Click "Permissions for this site"</li>
                        <li>Find "Location" and change to "Allow"</li>
                    </ol>
                </div>
                
                <!-- Generic -->
                <div class="instruction-set" data-browser="generic">
                    <strong>Most browsers:</strong>
                    <ol>
                        <li>Look for a lock icon 🔒 in your address bar</li>
                        <li>Click it and find location settings</li>
                        <li>Change location access to "Allow"</li>
                        <li>Refresh the page and try again</li>
                    </ol>
                </div>
            </div>
        </div>
        
        <div class="permission-actions">
            <button class="btn btn-secondary" data-action="close-location-blocked">Search by Area</button>
            <button class="btn btn-primary" data-action="reload-page">Try Again</button>
        </div>
        
        <p class="permission-note">
            Don't worry - your location data is never stored or shared
        </p>
    </div>
</div>
